<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type='text/javascript' src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <!-- <script src="./js/initialize.js" defer ></script>
  <script src="./js/index.js" defer ></script>  -->
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/navigation.css">
  <link rel="stylesheet" href="./css/park.css">
  <link rel="stylesheet" href="./css/footer.css">
  <link rel="stylesheet" href="./css/selected-park.css">

  

  <title>Document</title>
</head>
<body>

  <h1 id="header">Loading</h1>

    <!-- SPECIFIC PARK SECTION -->
    <section class="layout">

      <!-- THIS WILL BE A JS FILE SECTION -->
      <!--  Is this a select box for the parks?  -->
      <section class="category">
        <form id='park-selection' class="park-selection"  action='/' method='POST'>
        <label for="parks">Category:</label>
        <select name="category" id="category_select" required>
          <option value="">--Please choose a park--</option>
          <option value="1">Shore Reserve</option>
          <option value="2">Jacobs Reserve</option>
          <option value="3">Dunstan Reserve</option>
        </select>
        </form>
      </section>  
      



      <!-- <section class="selected-park">
        <form class="park-selection" id='park-selection' action='/' method='POST'>
          <label for="parks">Choose a park:</label><br>
          <select id="parks" name="parks">
            <option value="shore-reserve">Shore Reserve</option>
            <option value="jacobs-reserve">Jacobs Reserve</option>
            <option value="dunstan-reserve">Dunstan Reserve</option>
          </select><br>
          <input class="selected-park" type="submit">
        </form>
      </section> -->

      

      <!-- MAP DISPLAY -->

      <main id="parks-map" class="parks-map">
        <img class="screenshot" src="./images/bing-map-screenshot.png" alt="">
      </main>

      <section id="selected-park-display" class="selected-park-display">
        <!-- Is this below going to be generated by DOM or the inner.HTML -->
        <div class="selected-park-info">
          <div><span class="material-icons park">
            park
            </span></div>
            <div class="selected-park-details">
              <h2>Rachel checked in at 11am</h2>
              <p>with Felix (high-energy dog)</p>
            </div>
            <div>
              <span class="material-icons navigate_next">navigate_next</span>
            </div>
        </div>
        <div class="selected-park-info">
          <div><span class="material-icons park">
            park
            </span></div>
            <div class="selected-park-details">
              <h2>Karin checked in at 11am</h2>
              <p>with Luna (medium-energy dog)</p>
            </div>
            <div>
              <span class="material-icons navigate_next">navigate_next</span>
            </div>
            
        </div>
        
      </section>
    </section>

<script>
    const parkSelection = document.querySelector('#park-selection')

    parkSelection.addEventListener('change', event => {
    event.preventDefault();

    const data = Object.fromEntries(new FormData(parkSelection));
    axios.post('/api/sessions', data)
        .then(successResponse => window.location = '/selected-park.html')
        // .catch(errorResponse =>{
        //     // console.log(errorResponse);
        //     document.querySelector('#errors')
        //         .innerHTML = errorResponse.response.data.message;
         
})
</script>

</body>
</html>